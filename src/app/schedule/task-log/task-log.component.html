<div class="task-log">
  <h2>📋 Task Log</h2>

  <!-- Filter Section -->
  <div class="filters">
    <select [(ngModel)]="filterSubject" (change)="applyFilter()">
      <option value="">Filter by Subject</option>
      <option *ngFor="let s of uniqueSubjects" [value]="s">{{ s }}</option>
    </select>

    <select [(ngModel)]="filterType" (change)="applyFilter()">
      <option value="">Filter by Type</option>
      <option value="Lecture">Lecture</option>
      <option value="Practical">Practical</option>
      <option value="Meeting">Meeting</option>
    </select>

    <select [(ngModel)]="sortBy" (change)="applyFilter()">
      <option value="date">Sort by Date ⏱️</option>
      <option value="subject">Group by Subject 📚</option>
    </select>
  </div>

  <!-- Add Task -->
  <form (ngSubmit)="addTask()" #taskForm="ngForm" class="add-task">
    <input type="text" [(ngModel)]="newTask.subject" name="subject" placeholder="Subject" required />

    <select [(ngModel)]="newTask.type" name="type" required>
      <option [selected]="!newTask.type" disabled>Type</option>
      <option value="Lecture">Lecture</option>
      <option value="Practical">Practical</option>
      <option value="Meeting">Meeting</option>
    </select>

    <select [(ngModel)]="newTask.teacher" name="teacher" required>
      <option [selected]="!newTask.teacher" disabled>Assign Teacher</option>
      <option *ngFor="let t of teachers" [value]="t">{{ t }}</option>
    </select>

    <input type="date" [(ngModel)]="newTask.date" name="date" required />
    <input type="time" [(ngModel)]="newTask.time" name="time" required />

    <select [(ngModel)]="newTask.status" name="status" required>
      <option value="upcoming">Upcoming</option>
      <option value="completed">Completed</option>
      <option value="pending">Pending</option>
    </select>

    <button type="submit">➕ Add Task</button>
  </form>

  <!-- Tasks Table -->
  <table class="task-table">
    <thead>
      <tr>
        <th>Subject</th>
        <th>Type</th>
        <th>Teacher</th>
        <th>Date</th>
        <th>Time</th>
        <th>Status</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let task of filteredTasks" [class.overdue]="isOverdue(task)">
        <td>{{ task.subject }}</td>
        <td>{{ task.type }}</td>
        <td>{{ task.teacher }}</td>
        <td>{{ task.date }}</td>
        <td>{{ task.time }}</td>
        <td>{{ task.status }}</td>
      </tr>
    </tbody>
  </table>
</div>
